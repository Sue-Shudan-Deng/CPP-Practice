{"id":418913640,"lang":"python3","lang_name":"Python3","time":"2 years, 9 months","timestamp":1605036613,"status":15,"status_display":"Runtime Error","runtime":"N/A","url":"/submissions/detail/418913640/","is_pending":"Not Pending","title":"Max Sum of Rectangle No Larger Than K","memory":"N/A","code":"class Solution:\n    def maxSumSubmatrix(self, matrix: List[List[int]], k: int) -> int:\n        \"\"\"\n        https://www.youtube.com/watch?v=RZVPX3elY9I&t=487s\n        \"\"\"\n        row, col = len(matrix), len(matrix[0])\n        if not matrix or not matrix[0]:\n            return 0\n        \n        \"\"\"\n        如果行数远大于列数，矩阵应该转置\n        \"\"\"\n        \n        if row > col:\n            new_matrix = [[0 for _ in range(col)] for _ in range(row)]\n            for r in range(row):\n                for c in range(col):\n                    new_matrix[r][c] = matrix[c][r]\n            return self.maxSumSubmatrix(new_matrix, k)\n        \n        ans = float(\"-inf\")\n        for r1 in range(row):\n            dp = [0 for _ in range(col)]\n            for r2 in range(r1, row):\n                # step 1 : build array\n                for c in range(col):\n                    dp[c] += matrix[r2][c]\n                # step 2: max subarray no larger than K\n                prefix = [0 for _ in range(col + 1)]\n                prefix[1] = dp[0]\n                for i in range(2, col + 1):\n                    prefix[i] = prefix[i - 1] + dp[i - 1]\n                \n                cur = [[0, 0]]\n                for j in range(1, col + 1):\n                    p = bisect.bisect_left(cur, [prefix[j] - k])\n                    if p < len(cur):\n                        ans = max(ans, prefix[j] - prefix[cur[p][1]])\n                    bisect.insort(cur, [prefix[j], j])\n        return ans\n        ","compare_result":"111111111111111111100000000","title_slug":"max-sum-of-rectangle-no-larger-than-k","has_notes":false,"flag_type":1}